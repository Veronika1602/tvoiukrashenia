

<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–æ–ª—å–µ –∏ —á–æ–∫–µ—Ä—ã - –¢–≤–æ–∏ —É–∫—Ä–∞—à–µ–Ω–∏—è</title>
    <style>
* {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --color-primary: #dbcebb;
            --color-accent: #c2785d;
            --color-light: #dbcebb;
            --color-dark: #2a2a2a;
            --color-border: #dbac8e;
            --color-text: #89816a;
            --color-heading: #51291f;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: var(--color-text);
            line-height: 1.6;
            background-color: var(--color-light);
            animation: fadeIn 0.8s ease-in-out;
        }

        /* --- –®–ê–ü–ö–ê (–¢–û–ß–ù–ê–Ø –ö–û–ü–ò–Ø –ì–õ–ê–í–ù–û–ô) --- */
        header {
            background-color: white;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 40px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .logo {
            font-size: 24px;
            font-weight: 600;
            color: #c2785d;
            text-decoration: none;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 40px;
        }

        nav a {
            text-decoration: none;
            color: var(--color-text);
            font-size: 14px;
            transition: color 0.3s;
        }

        nav a:hover {
            color: var(--color-accent);
        }

        
        /* –ê–∫—Ç–∏–≤–Ω—ã–π –ø—É–Ω–∫—Ç –º–µ–Ω—é */
        nav a.active,
        nav .nav-links li.active > a {
            color: var(--color-accent);
            font-weight: 700;
        }

        nav a.active::after,
        nav .nav-links li.active > a::after {
            content: '';
            display: block;
            height: 2px;
            background: var(--color-accent);
            margin-top: 6px;
            border-radius: 2px;
        }
/* –í—ã–ø–∞–¥–∞—é—â–µ–µ –º–µ–Ω—é (–∫–∞–∫ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π) */
        .nav-dropdown {
            position: relative;
        }

        .dropdown-menu {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            background: white;
            list-style: none;
            padding: 10px 0;
            min-width: 200px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            border-radius: 4px;
            z-index: 200;
        }

        .nav-dropdown:hover .dropdown-menu {
            display: block;
        }

        .dropdown-menu a {
            display: block;
            padding: 12px 20px;
            color: var(--color-text);
            text-decoration: none;
            transition: all 0.3s;
        }

        .dropdown-menu a:hover {
            background-color: var(--color-primary);
            color: white;
            padding-left: 25px;
        }

        /* –ö–Ω–æ–ø–∫–∞ –≤ –º–µ–Ω—é */
        .contact-btn {
            background-color: var(--color-primary);
            color: var(--color-heading) !important;
            padding: 10px 20px;
            border-radius: 4px;
            text-decoration: none;
            transition: background-color 0.3s;
            font-size: 14px;
            font-weight: 600;
        }

        .contact-btn:hover {
            background-color: var(--color-accent);
            color: white !important;
        }

        /* --- –ö–ê–¢–ê–õ–û–ì --- */
        .portfolio {
            padding: 40px 40px 80px 40px;

            /* –í–ê–ñ–ù–û: —É–±–∏—Ä–∞–µ–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —à–∏—Ä–∏–Ω—ã, —á—Ç–æ–±—ã –∫–∞—Ä—Ç–æ—á–∫–∏ –∑–∞–Ω—è–ª–∏ –≤–µ—Å—å —ç–∫—Ä–∞–Ω */
            max-width: none;
            width: 100%;
            margin: 0;
        }

        .section-title {
            font-size: 36px;
            color: var(--color-heading);
            text-align: center;
            margin-bottom: 40px;
            font-weight: 700;
        }

     }

        .portfolio-item {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: all 0.3s;

            /* —Ñ–∏–∫—Å–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É –≤–Ω–∏–∑—É –∫–∞—Ä—Ç–æ—á–∫–∏ */
            display: flex;
            flex-direction: column;
        }

        .portfolio-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.15);
        }

        /* === –ì–ê–õ–ï–†–ï–Ø –§–û–¢–û–ì–†–ê–§–ò–ô === */
        .portfolio-image {
            position: relative;
            height: 300px;
            background: #f9f9f9;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            color: #ccc;
            overflow: hidden;
        }

        .gallery-container {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .gallery-item {
            width: 100%;
            height: 100%;
            object-fit: cover;
            position: absolute;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
        }

        .gallery-item.active {
            opacity: 1;
            position: relative;
        }

        .gallery-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            padding: 10px 15px;
            font-size: 20px;
            cursor: pointer;
            border-radius: 4px;
            transition: background 0.3s;
            z-index: 10;
        }

        .gallery-nav:hover {
            background: rgba(0, 0, 0, 0.8);
        }

        .gallery-prev { left: 10px; }
        .gallery-next { right: 10px; }

        .gallery-dots {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 8px;
            z-index: 10;
        }

        .dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            cursor: pointer;
            transition: background 0.3s;
            border: none;
        }

        .dot.active {
            background: white;
        }

        .dot:hover {
            background: rgba(255, 255, 255, 0.8);
        }

        /* –î–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ –±–µ–∑ –≥–∞–ª–µ—Ä–µ–∏ */
        .portfolio-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .portfolio-content {
            padding: 20px;
            display: flex;
            flex-direction: column;
            flex-grow: 1;
        }

        .portfolio-title {
            font-size: 18px;
            color: var(--color-heading);
            margin-bottom: 5px;
            font-weight: 600;
        }

        .portfolio-price {
            font-size: 16px;
            color: var(--color-accent);
            font-weight: 700;
            margin-bottom: 15px;
        }

        .portfolio-desc {
            font-size: 13px;
            color: #888;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .btn-buy {
            display: block;
            width: 100%;
            text-align: center;
            padding: 12px;
            background-color: var(--color-accent);
            color: white;
            text-decoration: none;
            border-radius: 4px;
            font-size: 14px;
            font-weight: 600;
            transition: background 0.3s;
            border: none;
            cursor: pointer;
            margin-top: auto;
        }

        .btn-buy:hover {
            background-color: var(--color-heading);
        }

        .back-link {
            display: inline-block;
            margin-bottom: 20px;
            color: var(--color-heading);
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
        }

        .back-link:hover {
            color: var(--color-accent);
        }

        footer {
            background-color: var(--color-dark);
            color: white;
            padding: 24px 20px;
            text-align: center;
            font-size: 14px;
        }

        @media (max-width: 768px) {
            nav {
                flex-direction: column;
                padding: 15px 20px;
                gap: 15px;
            }
            nav ul {
                flex-direction: column;
                gap: 10px;
                width: 100%;
            }
        }

        /* === –ü–õ–ê–í–ù–û–ï –ü–û–Ø–í–õ–ï–ù–ò–ï –°–¢–†–ê–ù–ò–¶–´ === */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @view-transition {
            navigation: auto;
        }

/* === –§–ò–õ–¨–¢–†–´ + –†–ê–°–ö–õ–ê–î–ö–ê (–¢–û–í–ê–†–´ + –§–ò–õ–¨–¢–† –°–ü–†–ê–í–ê) === */
.portfolio-with-filters{
  display: grid;
  grid-template-columns: 1fr 220px;  /* —Ç–æ–≤–∞—Ä—ã | —Ñ–∏–ª—å—Ç—Ä */
  gap: 30px;
  align-items: start;
}

.portfolio-grid-wrapper{
  width: 100%;
  min-width: 0;
  display: flex;
  justify-content: flex-end; /* –ø—Ä–∏–∂–∏–º–∞–µ–º —Å–µ—Ç–∫—É –∫ —Ñ–∏–ª—å—Ç—Ä—É */
}

/* —Ñ–∏–ª—å—Ç—Ä —Å–ø—Ä–∞–≤–∞ –∏ –ª–∏–ø–∫–∏–π */
.filters-sidebar{
  width: 220px;
  min-width: 220px;
  background: white;
  padding: 20px;
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  height: fit-content;

  position: sticky;
  top: 100px;

  align-self: start; /* –≤–∞–∂–Ω–æ –¥–ª—è sticky –≤–Ω—É—Ç—Ä–∏ grid */
}

/* –ê–¥–∞–ø—Ç–∏–≤: –Ω–∞ —É–∑–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö —Ñ–∏–ª—å—Ç—Ä —É—Ö–æ–¥–∏—Ç –≤–Ω–∏–∑ (—Å –∑–∞–¥–∞–Ω–Ω–æ–π —à–∏—Ä–∏–Ω—ã) */
@media (max-width: 900px){
  .portfolio-with-filters{
    grid-template-columns: 1fr; /* –æ–¥–∏–Ω —Å—Ç–æ–ª–±–µ—Ü */
  }

  .filters-sidebar{
    width: 100%;
    min-width: 0;
    position: static; /* –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ sticky –æ–±—ã—á–Ω–æ –º–µ—à–∞–µ—Ç */
  }
}


        .filter-group {
            margin-bottom: 30px;
        }

        .filter-group h4 {
            font-size: 16px;
            font-weight: 600;
            color: var(--color-heading);
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-bottom: 2px solid var(--color-accent);
            padding-bottom: 10px;
        }

        .filter-option {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
        }

        .filter-option input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
            accent-color: var(--color-accent);
        }

        .filter-option label {
            margin-left: 10px;
            font-size: 14px;
            color: var(--color-text);
            cursor: pointer;
            user-select: none;
        }

        .filter-option input[type="checkbox"]:checked + label {
            color: var(--color-heading);
            font-weight: 600;
        }

        .reset-filters {
            display: block;
            width: 100%;
            padding: 12px;
            background-color: var(--color-primary);
            color: var(--color-heading);
            border: none;
            border-radius: 4px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
            margin-top: 20px;
        }

        .reset-filters:hover {
            background-color: var(--color-accent);
            color: white;
        }

/* ================================
   –î–û–ü. –ü–†–ê–í–ö–ò: 320px, –º–∞–∫—Å–∏–º—É–º 4 –≤ —Ä—è–¥,
   –æ–¥–∏–Ω–∞–∫–æ–≤–∞—è –≤—ã—Å–æ—Ç–∞, –±–µ–∑ "—Ä–∞–∑—ä–µ–∑–¥–∞" –ø—Ä–∏ —Ñ–∏–ª—å—Ç—Ä–µ
   ================================ */

/* –°–µ—Ç–∫–∞ –∫–∞—Ä—Ç–æ—á–µ–∫: –∫–∞–∂–¥–∞—è –∫–æ–ª–æ–Ω–∫–∞ –¥–æ 320px, –º–∏–Ω–∏–º—É–º 280px */
.portfolio-grid{
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 320px));
  gap: 30px;

  /* —à–∏—Ä–∏–Ω–∞ —Å–µ—Ç–∫–∏ = –º–∞–∫—Å–∏–º—É–º 4 –∫–∞—Ä—Ç–æ—á–∫–∏, –Ω–æ –Ω–µ —à–∏—Ä–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
  width: min(100%, calc(4 * 320px + 3 * 30px));
  justify-content: start; /* —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–µ–∫ */
}

/* –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º —à–∏—Ä–∏–Ω—É –∑–æ–Ω—ã —Å —Ç–æ–≤–∞—Ä–∞–º–∏: 4*320 + 3*30 = 1370 */
.portfolio-grid-wrapper{
  width: 100%;
  min-width: 0;
  display: flex;
  justify-content: flex-end; /* –ø—Ä–∏–∂–∏–º–∞–µ–º —Å–µ—Ç–∫—É –∫ —Ñ–∏–ª—å—Ç—Ä—É */
}

/* –ö–∞—Ä—Ç–æ—á–∫–∏ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —à–∏—Ä–∏–Ω—ã –∏ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–π –≤—ã—Å–æ—Ç—ã */
.portfolio-item{
  width: 100%;
  max-width: 320px;
  height: 600px; /* –±–∞–∑–∞ –ø–æ –≤—ã—Å–æ—Ç–µ "–ò–∑—É–º—Ä—É–¥–Ω–æ–≥–æ —Å–≤–µ—Ç–∞" */
  display: flex;
  flex-direction: column;
}

/* –ö–æ–Ω—Ç–µ–Ω—Ç –≤–Ω—É—Ç—Ä–∏ ‚Äî —á—Ç–æ–±—ã –∫–Ω–æ–ø–∫–∞ –≤—Å–µ–≥–¥–∞ –±—ã–ª–∞ –≤–Ω–∏–∑—É */
.portfolio-content{
  display: flex;
  flex-direction: column;
  flex: 1;
}

/* –û–ø–∏—Å–∞–Ω–∏–µ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º, —á—Ç–æ–±—ã –Ω–µ —Ä–∞–∑–¥—É–≤–∞–ª–æ –≤—ã—Å–æ—Ç—É */
.portfolio-desc{
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 5; /* –º–æ–∂–Ω–æ 4/5/6 –ø–æ –≤–∫—É—Å—É */
}


/* ===== FOOTER ULTRA COMPACT OVERRIDE ===== */
footer{
  padding: 12px 16px !important;
}
footer p{
  margin: 4px 0 !important;
  line-height: 1.2;
  font-size: 12px;
}
footer .footer-content{
  gap: 6px !important;
}
footer .footer-bottom,
footer .copyright{
  margin-top: 6px !important;
  padding-top: 6px !important;
  font-size: 11px !important;
}

</style>
</head>
<body>

    <!-- –®–ê–ü–ö–ê -->
    

<header>
    <nav>
        <a href="index.html" class="logo">–¢–≤–æ–∏ —É–∫—Ä–∞—à–µ–Ω–∏—è‚úß</a>

        <ul class="nav-links">
            <li><a href="index.html#about">–û–±–æ –º–Ω–µ</a></li>

            <li class="nav-dropdown active">
                <a href="index.html#categories" class="active">–ú–æ–∏ —Ä–∞–±–æ—Ç—ã</a>
                <ul class="dropdown-menu">
                    <li><a href="kolye-i-chokery.html">–ö–æ–ª—å–µ –∏ —á–æ–∫–µ—Ä—ã</a></li>
                    <li><a href="broshi-braslety-sergi.html">–ë—Ä–æ—à–∏, –±—Ä–∞—Å–ª–µ—Ç—ã –∏ —Å–µ—Ä—å–≥–∏</a></li>
                </ul>
            </li>

            <li><a href="index.html#why-choose-me">–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ –∏ –¥–æ—Å—Ç–∞–≤–∫–∞</a></li>
            <li><a href="index.html#contact">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
        </ul>

        <a href="index.html#contact" class="contact-btn">–ó–∞–∫–∞–∑–∞—Ç—å</a>
    </nav>
</header>



    <!-- –ö–ê–¢–ê–õ–û–ì -->
    <section class="portfolio">
        <a href="index.html" class="back-link">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é</a>

        <h2 class="section-title">–ö–æ–ª—å–µ –∏ —á–æ–∫–µ—Ä—ã</h2>

        <div class="portfolio-with-filters">
            <!-- –¢–û–í–ê–†–´ –°–õ–ï–í–ê -->
            <div class="portfolio-grid-wrapper">
                <!-- –í–ê–ñ–ù–û: –∑–¥–µ—Å—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –û–î–ù–ê portfolio-grid (—è —É–±—Ä–∞–ª–∞ –≤–ª–æ–∂–µ–Ω–Ω—É—é) -->
                <div class="portfolio-grid" id="productsGrid">

                    
                    <!-- –¢–æ–≤–∞—Ä—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ products.json -->


                </div>
            </div>

            <!-- –§–ò–õ–¨–¢–†–´ –°–ü–†–ê–í–ê -->
            <div class="filters-sidebar" id="filtersSidebar">
                <div class="filter-group">
                    <h4>–¶–≤–µ—Ç</h4>
                    <div id="filterColors"></div>
                </div>

                <div class="filter-group">
                    <h4>–ú–∞—Ç–µ—Ä–∏–∞–ª</h4>
                    <div id="filterMaterials"></div>
                </div>

                <button class="reset-filters" id="resetFiltersBtn" type="button">–û—á–∏—Å—Ç–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã</button>
            </div>
        </div>
    </section>

    <!-- –ü–û–î–í–ê–õ -->
    <footer>
        <p>&copy; 2026 –¢–≤–æ–∏ —É–∫—Ä–∞—à–µ–Ω–∏—è ‚Äî —É–∫—Ä–∞—à–µ–Ω–∏—è —Ä—É—á–Ω–æ–π —Ä–∞–±–æ—Ç—ã. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
        <p style="margin-top: 10px; color: #aaa;">–°–æ–∑–¥–∞–Ω–æ —Å –ª—é–±–æ–≤—å—é –∫ —É–∫—Ä–∞—à–µ–Ω–∏—è–º ‚úß</p>
    </footer>

    
    <script>
        // ====== –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã ======
        const CATEGORY = "kolye-i-chokery"; // —Ç–æ–≤–∞—Ä—ã —ç—Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –±—É–¥—É—Ç –ø–æ–∫–∞–∑–∞–Ω—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ

        let allProducts = [];
        let categoryProducts = [];

        function orderProduct(productName) {
            localStorage.setItem('selectedProduct', productName);
            window.location.href = 'index.html#contact';
        }

        function uniq(arr) {
            return [...new Set(arr)];
        }

        function createFilterOption(container, value, onChange) {
            const safeId = (container.id + "-" + value)
                .toLowerCase()
                .replace(/\s+/g, "-")
                .replace(/[^a-z0-9–∞-—è—ë\-]/gi, "");

            const row = document.createElement("div");
            row.className = "filter-option";

            row.innerHTML = `
                <input type="checkbox" id="${safeId}" value="${value}">
                <label for="${safeId}">${value}</label>
            `;

            row.querySelector("input").addEventListener("change", onChange);
            container.appendChild(row);
        }

        function getCheckedValues(containerId) {
            return [...document.querySelectorAll(`#${containerId} input[type="checkbox"]:checked`)].map(x => x.value);
        }

        function applyFilters() {
            const selectedColors = getCheckedValues("filterColors");
            const selectedMaterials = getCheckedValues("filterMaterials");

            const filtered = categoryProducts.filter(p => {
                const colors = p.filters?.colors || [];
                const materials = p.filters?.materials || [];

                const colorOk = selectedColors.length === 0 || selectedColors.some(c => colors.includes(c));
                const materialOk = selectedMaterials.length === 0 || selectedMaterials.some(m => materials.includes(m));

                return colorOk && materialOk;
            });

            renderProducts(filtered);
        }

        function renderFilters(products) {
            const colorsBox = document.getElementById("filterColors");
            const materialsBox = document.getElementById("filterMaterials");

            colorsBox.innerHTML = "";
            materialsBox.innerHTML = "";

            const colors = uniq(products.flatMap(p => (p.filters?.colors || []))).sort((a,b)=>a.localeCompare(b,'ru'));
            const materials = uniq(products.flatMap(p => (p.filters?.materials || []))).sort((a,b)=>a.localeCompare(b,'ru'));

            colors.forEach(c => createFilterOption(colorsBox, c, applyFilters));
            materials.forEach(m => createFilterOption(materialsBox, m, applyFilters));
        }

        function buildGalleryHTML(product) {
            const images = Array.isArray(product.images) ? product.images : [];

            if (images.length === 0) {
                return `<div class="portfolio-image">üñºÔ∏è</div>`;
            }

            const imgs = images.map((src, i) =>
                `<img src="${src}" alt="${product.title} - —Ñ–æ—Ç–æ ${i+1}" class="gallery-item ${i===0 ? "active" : ""}">`
            ).join("");

            const dots = images.map((_, i) =>
                `<button class="dot ${i===0 ? "active" : ""}" data-index="${i}" type="button"></button>`
            ).join("");

            return `
                <div class="portfolio-image">
                    <div class="gallery-container">
                        ${imgs}
                    </div>
                    ${images.length > 1 ? `
                        <button class="gallery-nav gallery-prev" type="button">‚ùÆ</button>
                        <button class="gallery-nav gallery-next" type="button">‚ùØ</button>
                        <div class="gallery-dots">${dots}</div>
                    ` : ``}
                </div>
            `;
        }

        function wireGallery(card) {
            const items = [...card.querySelectorAll(".gallery-item")];
            const dots = [...card.querySelectorAll(".dot")];
            const prev = card.querySelector(".gallery-prev");
            const next = card.querySelector(".gallery-next");

            if (!items.length || !prev || !next) return;

            function setActive(idx) {
                items.forEach((it, i) => it.classList.toggle("active", i === idx));
                dots.forEach((d, i) => d.classList.toggle("active", i === idx));
            }

            function getActiveIndex() {
                return items.findIndex(it => it.classList.contains("active"));
            }

            prev.addEventListener("click", () => {
                const i = getActiveIndex();
                setActive((i - 1 + items.length) % items.length);
            });

            next.addEventListener("click", () => {
                const i = getActiveIndex();
                setActive((i + 1) % items.length);
            });

            dots.forEach(d => {
                d.addEventListener("click", () => setActive(Number(d.dataset.index)));
            });
        }

        function renderProducts(products) {
            const grid = document.getElementById("productsGrid");
            grid.innerHTML = "";

            products.forEach(p => {
                const card = document.createElement("div");
                card.className = "portfolio-item";

                card.innerHTML = `
                    ${buildGalleryHTML(p)}
                    <div class="portfolio-content">
                        <h3 class="portfolio-title">${p.title || ""}</h3>
                        <p class="portfolio-price">${p.price || ""}</p>
                        <p class="portfolio-desc">${p.description || ""}</p>
                        <button class="btn-buy" type="button">–ó–∞–∫–∞–∑–∞—Ç—å –ø–æ—Ö–æ–∂–µ–µ</button>
                    </div>
                `;

                card.querySelector(".btn-buy").addEventListener("click", () => orderProduct(p.title || ""));
                wireGallery(card);

                grid.appendChild(card);
            });
        }

        async function initPage() {
            try {
                const res = await fetch("products.json", { cache: "no-store" });
                if (!res.ok) throw new Error("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å products.json");

                allProducts = await res.json();
                categoryProducts = allProducts.filter(p => p.category === CATEGORY);

                renderFilters(categoryProducts);
                renderProducts(categoryProducts);

                document.getElementById("resetFiltersBtn").addEventListener("click", () => {
                    document.querySelectorAll('#filtersSidebar input[type="checkbox"]').forEach(cb => cb.checked = false);
                    renderProducts(categoryProducts);
                });

            } catch (err) {
                console.error(err);
                const grid = document.getElementById("productsGrid");
                grid.innerHTML = `<p style="color: var(--color-heading);">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ —Ñ–∞–π–ª <b>products.json</b> –ª–µ–∂–∏—Ç —Ä—è–¥–æ–º —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü–µ–π –∏ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω –Ω–∞ GitHub Pages.</p>`;
            }
        }

        // –õ–∏—Å—Ç–∞–Ω–∏–µ –∫–ª–∞–≤–∏—à–∞–º–∏ —Å—Ç—Ä–µ–ª–æ–∫: —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –ø–µ—Ä–≤–æ–π –≤–∏–¥–∏–º–æ–π –≥–∞–ª–µ—Ä–µ–∏
        document.addEventListener('keydown', function(e) {
            if (e.key !== 'ArrowLeft' && e.key !== 'ArrowRight') return;
            const btn = document.querySelector(e.key === 'ArrowLeft' ? '.gallery-prev' : '.gallery-next');
            if (btn) btn.click();
        });

        initPage();
    </script>

</body>
</html>
